<!DOCTYPE html>
<html class="no-js" lang="zxx">
  <%- include('../partials/_userhead') %>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

  <body>
    <style>
      .d-md-none {
  display: none;
}

@media (max-width: 768px) {
  .d-md-none {
    display: block;
  }

  .d-lg-block {
    display: none;
  }
}
    </style>
    <header>
      <div class="header-area">
        <div class="main-header">
          <div class="header-bottom">
            <div class="container-fluid">
              <div class="row align-items-center">
                <!-- Logo -->
                <div class="col-xl-1 col-lg-1 col-md-1 col-sm-3">
                  <div class="logo">
                    <a href="/userhome"
                      ><img src="assets/img/logo/logo.png" alt=""
                    /></a>
                  </div>
                </div>
                <div class="col-xl-6 col-lg-8 col-md-7 col-sm-5">
                  <!-- Main-menu -->
                  <div class="main-menu f-right d-none d-lg-block">
                    <nav>
                      <ul id="navigation">
                        <li><a href="userhome">Home</a></li>
                        <li><a href="#category">Category</a></li>
                        <li><a href="viewProducts">products</a></li>
                        <li class="d-md-none"><a href="/wallet">Wallet</a></li>
                    <li class="d-md-none"><a href="/wishlist">wishlist</a></li>
                    <li class="d-md-none"><a href="/cart">cart</a></li>
                    <li class="d-md-none"><a href="/logout">Logout</a></li>
                      
                      </ul>
                    </nav>
                  </div>
                </div>
                <div class="col-xl-5 col-lg-3 col-md-3 col-sm-3 fix-card">
                  <ul
                    class="header-right f-right d-none d-lg-block d-flex justify-content-between"
                  >
                    <li>
                      <div class="wallet-items">
                        <a href="/wallet">
                          <i class="fas fa-wallet"></i>
                        </a>
                      </div>
                    </li>

                    <li class="d-none d-xl-block">
                      <div class="favorit-items">
                        <a href="/wishlist">
                          <i class="far fa-heart"></i>
                          <span id="wishlistCount" class="badge position-absolute top-0 start-100 translate-middle badge-danger">
                            <%= user?.wishlist?.length || 0 %>
                          </span>
                        </a>
                      </div>
                    </li>
                    <li>
                      <div class="shopping-card">
                        <a href="/cart">
                          <i class="fas fa-shopping-cart"></i>
                          <span id="cartCount" class="badge position-absolute top-0 start-100 translate-middle badge-danger">
                            <%= cart?.products?.length || 0 %>
                          </span>
                          
                        </a>
                      </div>
                    </li>
                    <li>
                      <div class="shopping-card">
                        <a href="/userProfile">
                          <i class="fas fa-user"></i>
                        </a>
                      </div>
                    </li>

                    <li class="d-none d-lg-block">
                      <% if (user) { %>
                      <a
                        class="btn"
                        style="
                          background-color: red;
                          height: 100%;
                          align-content: center;
                        "
                        onclick="confirmLogout()"
                      >
                        <i class="bi bi-box-arrow-right"></i> Logout
                      </a>
                      <% } else { %>
                      <a
                        href="/login"
                        class="btn"
                        style="
                          background-color: green;
                          height: 100%;
                          align-content: center;
                        "
                      >
                        <i class="bi bi-box-arrow-in-right"></i> Sign In
                      </a>
                      <% } %>
                    </li>
                  </ul>
                </div>
                <!-- Mobile Menu -->
                <div class="col-12">
                  <div class="mobile_menu d-block d-lg-none"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <main>
      <!-- slider Area Start -->
      <div class="slider-area">
        <!-- Mobile Menu -->
        <div class="slider-active">
          <div
            class="single-slider slider-height"
            data-background="assets/img/hero/h1_hero.jpg"
          >
            <div class="container">
              <div
                class="row d-flex align-items-center justify-content-between"
              >
                <div
                  class="col-xl-6 col-lg-6 col-md-6 col-sm-6 d-none d-md-block"
                >
                  <div
                    class="hero__img"
                    data-animation="bounceIn"
                    data-delay=".4s"
                  >
                    <img src="assets/img/hero/hero_man.png" alt="" />
                  </div>
                </div>
                <div class="col-xl-5 col-lg-5 col-md-5 col-sm-8">
                  <div class="hero__caption">
                    <span data-animation="fadeInRight" data-delay=".4s"
                      >60% Discount</span
                    >
                    <h1 data-animation="fadeInRight" data-delay=".6s">
                      Winter <br />
                      Collection
                    </h1>
                    <p data-animation="fadeInRight" data-delay=".8s">
                      Best Cloth Collection By 2024!
                    </p>
                    <!-- Hero-btn -->
                    <div
                      class="hero__btn"
                      data-animation="fadeInRight"
                      data-delay="1s"
                    >
                      <a href="/viewProducts" class="black-btn"
                        >Shop Now</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="single-slider slider-height"
            data-background="assets/img/hero/h1_hero.jpg"
          >
            <div class="container">
              <div
                class="row d-flex align-items-center justify-content-between"
              >
                <div
                  class="col-xl-6 col-lg-6 col-md-6 col-sm-6 d-none d-md-block"
                >
                  <div
                    class="hero__img"
                    data-animation="bounceIn"
                    data-delay=".4s"
                  >
                    <img src="assets/img/hero/hero_man.png" alt="" />
                  </div>
                </div>
                <div class="col-xl-5 col-lg-5 col-md-5 col-sm-8">
                  <div class="hero__caption">
                    <span data-animation="fadeInRight" data-delay=".4s"
                      >60% Discount</span
                    >
                    <h1 data-animation="fadeInRight" data-delay=".6s">
                      Winter <br />
                      Collection
                    </h1>
                    <p data-animation="fadeInRight" data-delay=".8s">
                      Best Cloth Collection By 2024!
                    </p>
                    <!-- Hero-btn -->
                    <div
                      class="hero__btn"
                      data-animation="fadeInRight"
                      data-delay="1s"
                    >
                      <a href="industries.html" class="btn hero-btn"
                        >Shop Now</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- slider Area End-->
      <!-- Category Area Start-->
      <section class="category-area section-padding30" id="category">
        <div class="container-fluid">
          <!-- Section Title -->
          <div class="row">
            <div class="col-lg-12">
              <div class="section-tittle text-center mb-85">
                <h2>Top Categories</h2>
              </div>
            </div>
          </div>
          <div class="row" style="margin-left: 45px;">
            <% category.slice(0, 3).forEach(function(category) { %>
             <a href="/viewProducts?category=<%= category.value %>"><div class="col-xl-4 col-lg-6">
                <div class="single-category mb-30">
                  <div class="category-img">                  
                    <img src="uploads/<%= category.image %>" alt="<%= category.value %>"/>
                    <div class="category-caption">
                      <span class="collection" style="color: black;"><%= category.value %></span>

                      <!-- <div style="background-color: rgb(203, 203, 198); border-radius: 20px; width: 45%; ">
                      <span class="best" style="color: black;">Best New Deals</a></span>
                      <span class="collection">New Collection</span>
                      </div> -->
                    </div>
                  </div>
                </div>
              </div></a>
            <% }); %>
            
          </div>
        </div>
      </section>

      <!-- Category Area End-->
      <!-- Latest Products Start -->
      <section class="latest-product-area padding-bottom">
        <div class="container">
          <div
            class="row product-btn d-flex justify-content-end align-items-end">
            <!-- Section Tittle -->
            <div class="col-xl-4 col-lg-5 col-md-5">
              <div class="section-tittle mb-30">
                <h2>Latest Products</h2>
              </div>
            </div>
            <div class="col-xl-8 col-lg-7 col-md-7">
              <div class="properties__button f-right">
                <!--Nav Button  -->
                
                <!--End Nav Button  -->
              </div>
            </div>
          </div>
          <!-- Nav Card -->
          <div class="tab-content" id="nav-tabContent">
            <!-- Tab Pane - Product Category One -->
            <div
              class="tab-pane fade show active"
              id="nav-home"
              role="tabpanel"
              aria-labelledby="nav-home-tab"
            >
              <div class="row">
                <% products.slice(0,9).forEach(product => { %>
                <div class="col-xl-4 col-lg-4 col-md-6">
                  <div class="single-product mb-60">
                    <div class="product-img" style="height: 334px;">
                      <a href="/viewProductDetails/<%= product._id %>">
                        <img
                          src="uploads/<%= product.image[0] %>"
                          alt="<%= product.name %>"/></a>
                      <% if (product.isNew) { %>
                      <div class="new-product">
                        <span>New</span>
                      </div>
                      <% } %>
                    </div>
                    <div class="product-caption">
                       
                      <h4>
                        <a href="/viewProductDetails/<%= product._id %>"
                          ><%= product.pname %></a
                        >
                      </h4>
                      <div class="price">
                        <p>                             
                          <% if (product.offers.length > 0) { %>
                            <%               
                                const activeOffers = product.offers
                                    .filter(offer =>
                                        new Date(offer.offerId.expiryDate) > new Date() && 
                                        offer.offerId.isListed
                                    )                                
                                const activeOffer = activeOffers.length > 0 ? activeOffers[0] : null;
                    
                                if (activeOffer) {
                                    let discountedPrice = (product.pprice * (1 - activeOffer.offerId.discount / 100)).toFixed(2);
                            %>
                            <span  style="text-decoration: line-through; color: grey;">₹<%= product.pprice %></span>
                            <span class="discounted-price" id="discountedPrice-<%= product._id %>" style="color: rgb(16, 5, 5); font-weight: bold;"> ₹<%= discountedPrice %></span>
                              <% } else { %>
                                  ₹<%= product.pprice %>
                              <% } %>
                          <% } else { %>
                              ₹<%= product.pprice %>
                          <% } %>
                      </p>
                      </div>
                    </div>
                  </div>
                </div>
                <% }) %>
              </div>
            </div>
            <!-- Additional Tab Panes can be added here as needed -->
          </div>

          <!-- End Nav Card -->
        </div>
      </section>
      <!-- Best Product Start -->
      <div class="best-product-area lf-padding">
        <div
          class="product-wrapper bg-height"
          style="background-image: url('assets/img/categori/card.png')"
        >
          <div class="container position-relative">
            <div class="row justify-content-between align-items-end">
              <div class="product-man position-absolute d-none d-lg-block">
                <img src="assets/img/categori/card-man.png" alt="" />
              </div>
              <div class="col-xl-2 col-lg-2 col-md-2 d-none d-lg-block">
                <div class="vertical-text">
                  <span>Men</span>
                </div>
              </div>
              <div class="col-xl-8 col-lg-8">
                <div class="best-product-caption">
                  <h2>
                    Find The Best Product<br />
                    from Our Shop
                  </h2>
                  <p>Designers who are interesten creating state ofthe.</p>
                  <a href="/viewProducts" class="black-btn">Shop Now</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Shape -->
        <div class="shape bounce-animate d-none d-md-block">
          <img src="assets/img/categori/card-shape.png" alt="" />
        </div>
      </div>
      <!-- Best Product End-->
      <!-- Best Collection Start -->
      <div class="best-collection-area section-padding2">
        <div class="container">
          <div class="row d-flex justify-content-between align-items-end">
            <!-- Left content -->
            <div class="col-xl-4 col-lg-4 col-md-6">
              <div class="best-left-cap">
                <h2>Best Collection of This Month</h2>
                <p>Designers who are interesten crea.</p>
                <a href="/viewProducts" class="black-btn">Shop Now</a>
              </div>
              <div class="best-left-img mb-30 d-none d-sm-block">
                <img src="assets/img/collection/collection1.png" alt="" />
              </div>
            </div>
            <!-- Mid Img -->
            <div class="col-xl-2 col-lg-2 d-none d-lg-block">
              <div class="best-mid-img mb-30">
                <img src="assets/img/collection/collection2.png" alt="" />
              </div>
            </div>
            <!-- Riht Caption -->
            <div class="col-xl-4 col-lg-6 col-md-6">
              <div class="best-right-cap">
                <div class="best-single mb-30">
                  <div class="single-cap">
                    <h4>
                      Menz Winter<br />
                      Jacket
                    </h4>
                  </div>
                  <div class="single-img">
                    <img src="assets/img/collection/collection3.png" alt="" />
                  </div>
                </div>
              </div>
              <div class="best-right-cap">
                <div class="best-single mb-30">
                  <div class="single-cap active">
                    <h4>Menz Winter<br />Jacket</h4>
                  </div>
                  <div class="single-img">
                    <img src="assets/img/collection/collection4.png" alt="" />
                  </div>
                </div>
              </div>
              <div class="best-right-cap">
                <div class="best-single mb-30">
                  <div class="single-cap">
                    <h4>
                      Menz Winter<br />
                      Jacket
                    </h4>
                  </div>
                  <div class="single-img">
                    <img src="assets/img/collection/collection5.png" alt="" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Best Collection End -->
      <!-- Latest Offers Start -->
      <div class="latest-wrapper lf-padding">
        <div
          class="latest-area latest-height d-flex align-items-center"
          data-background="assets/img/collection/latest-offer.png"
        >
          <div class="container">
            <div class="row d-flex align-items-center">
              <div class="col-xl-5 col-lg-5 col-md-6 offset-xl-1 offset-lg-1">
                <div class="latest-caption">
                  <h2>Get Our<br />Latest Offers News</h2>
                  <p>Subscribe news latter</p>
                </div>
              </div>
              <div class="col-xl-5 col-lg-5 col-md-6">
                <div class="latest-subscribe">
                  <form action="#">
                    <input
                      type="email"
                      name="email"
                      autocomplete="email"
                      placeholder="Your email here"
                    />
                    <button>Shop Now</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- man Shape -->
          <div class="man-shape">
            <img src="assets/img/collection/latest-man.png" alt="" />
          </div>
        </div>
      </div>
      <!-- Latest Offers End -->
      <!-- Shop Method Start-->
      <div class="shop-method-area section-padding30">
        <div class="container">
          <div class="row d-flex justify-content-between">
            <div class="col-xl-3 col-lg-3 col-md-6">
              <div class="single-method mb-40">
                <i class="ti-package"></i>
                <h6>Free Shipping Method</h6>
                <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-6">
              <div class="single-method mb-40">
                <i class="ti-unlock"></i>
                <h6>Secure Payment System</h6>
                <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
              </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-6">
              <div class="single-method mb-40">
                <i class="ti-reload"></i>
                <h6>Secure Payment System</h6>
                <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Shop Method End-->
      <!-- Gallery Start-->
      <div class="gallery-wrapper" style="width: 95.5%;">
        <div class="gallery-area">
          <div class="container-fluid">
            <div class="row">
              <div class="gallery-items">
                <img src="assets/img/gallery/gallery1.jpg" alt="" />
              </div>
              <div class="gallery-items">
                <img src="assets/img/gallery/gallery2.jpg" alt="" />
              </div>
              <div class="gallery-items">
                <img src="assets/img/gallery/gallery3.jpg" alt="" />
              </div>
              <div class="gallery-items">
                <img src="assets/img/gallery/gallery4.jpg" alt="" />
              </div>
              <div class="gallery-items">
                <img src="assets/img/gallery/gallery5.jpg" alt="" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Gallery End-->
    </main>

    <%- include('../partials/_footer') %> <%- include('../partials/_js') %>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      function confirmLogout() {
        Swal.fire({
          title: "Are you sure?",
          text: "You will be logged out of your account.",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes",
        }).then((result) => {
          if (result.isConfirmed) {
            // Redirect to logout route if confirmed
            window.location.href = "/logout"; // Replace "/logout" with your actual logout route
          }
        });
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
